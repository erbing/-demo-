<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>代理模式 demo</title>
</head>
<body>
	
	<script>
		// var Flower = function(){};

		// var xiaoming = {
		// 	sendFlower: function(target){
		// 		var flower = new Flower();
		// 		target.receiveFlower( flower );
		// 	}
		// };

		// var B = {
		// 	receiveFlower: function(flower){
		// 		A.receiveFlower(flower);
		// 	}
		// };

		// var A = {
		// 	receiveFlower: function(flower){
		// 		console.log("收到花了" + flower);
		// 	}
		// } 

		// xiaoming.sendFlower(B);

		var Flower = function(){};

		var xiaoming = {
			sendFlower: function(target){
				var flower = new Flower();
				target.receiveFlower( flower );
			}
		};
		
		var B = {
			receiveFlower: function(flower){
				A.listenGoodMood(function(){  //监听女神A 的心情
					A.receiveFlower(flower);
				});	
			}
		};

		var A = {
			receiveFlower: function(flower){
				console.log("收到花了" + flower);
			},
			listenGoodMood: function( fn ){
				setTimeout(function(){
					fn();
				},10000); //十秒钟后女神的心情变好
			}
		} 

		xiaoming.sendFlower(B);		
	</script>

</body>
</html>